const data = {
    "DE": {
        "wealth": {
            "percentile": [
                0,
                -0.0012,
                -0.0018,
                -0.0022,
                -0.0025,
                -0.0028,
                -0.0029,
                -0.003,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.0031,
                -0.003,
                -0.003,
                -0.0029,
                -0.0027,
                -0.0025,
                -0.0023,
                -0.002,
                -0.0017,
                -0.0013,
                -0.0009,
                -0.0004,
                0.0002,
                0.0008,
                0.0016,
                0.0024,
                0.0034,
                0.0044,
                0.0056,
                0.0068,
                0.0082,
                0.0098,
                0.0115,
                0.0133,
                0.0153,
                0.0174,
                0.0198,
                0.0223,
                0.025,
                0.028,
                0.0311,
                0.0345,
                0.038,
                0.0418,
                0.0458,
                0.0499,
                0.0543,
                0.059,
                0.0638,
                0.069,
                0.0743,
                0.0799,
                0.0858,
                0.0919,
                0.0983,
                0.1049,
                0.1118,
                0.1191,
                0.1266,
                0.1344,
                0.1425,
                0.151,
                0.1597,
                0.1687,
                0.1781,
                0.1879,
                0.1981,
                0.2088,
                0.2199,
                0.2313,
                0.2432,
                0.2556,
                0.2684,
                0.2817,
                0.2957,
                0.3104,
                0.3257,
                0.3418,
                0.3588,
                0.3769,
                0.396,
                0.4163,
                0.4379,
                0.4611,
                0.4863,
                0.5138,
                0.5439,
                0.5768,
                0.6144,
                0.6577,
                0.7238,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "19%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "1,183,052,576.50 €",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.74",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.0038,
                0.0077,
                0.0116,
                0.0155,
                0.0194,
                0.0235,
                0.0276,
                0.032,
                0.0366,
                0.0411,
                0.0457,
                0.0504,
                0.0553,
                0.0603,
                0.0657,
                0.0711,
                0.0765,
                0.0819,
                0.0874,
                0.0931,
                0.0988,
                0.1047,
                0.1106,
                0.1166,
                0.1226,
                0.1286,
                0.1347,
                0.1408,
                0.147,
                0.1532,
                0.1595,
                0.1659,
                0.1724,
                0.179,
                0.1857,
                0.1925,
                0.1994,
                0.2064,
                0.2134,
                0.2204,
                0.2274,
                0.2345,
                0.2418,
                0.2492,
                0.2567,
                0.2643,
                0.2719,
                0.2797,
                0.2876,
                0.2956,
                0.3036,
                0.3118,
                0.3199,
                0.3283,
                0.3368,
                0.3453,
                0.3539,
                0.3624,
                0.3713,
                0.3801,
                0.3892,
                0.3984,
                0.4078,
                0.4172,
                0.4267,
                0.4363,
                0.4463,
                0.4563,
                0.4664,
                0.4765,
                0.4867,
                0.497,
                0.5076,
                0.5186,
                0.5295,
                0.5408,
                0.5521,
                0.5637,
                0.5754,
                0.5871,
                0.5988,
                0.6106,
                0.6232,
                0.6361,
                0.6489,
                0.6619,
                0.6754,
                0.6893,
                0.7035,
                0.7184,
                0.7338,
                0.7498,
                0.7668,
                0.7848,
                0.8037,
                0.8245,
                0.8475,
                0.8752,
                0.9103,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x24",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "22,518,059.10 €",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.32",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00294,
                0.00588,
                0.00883,
                0.01177,
                0.01471,
                0.01766,
                0.02063,
                0.02363,
                0.02682,
                0.03026,
                0.03393,
                0.03783,
                0.04194,
                0.04626,
                0.05078,
                0.0555,
                0.06041,
                0.06551,
                0.0708,
                0.07626,
                0.08182,
                0.08746,
                0.0932,
                0.09904,
                0.10499,
                0.11104,
                0.11718,
                0.1234,
                0.12971,
                0.13609,
                0.14255,
                0.14909,
                0.15572,
                0.16242,
                0.1692,
                0.17605,
                0.18297,
                0.18996,
                0.19704,
                0.20419,
                0.21144,
                0.21877,
                0.22619,
                0.23369,
                0.24128,
                0.24895,
                0.25671,
                0.26454,
                0.27248,
                0.2805,
                0.2886,
                0.2968,
                0.30509,
                0.31347,
                0.32195,
                0.33053,
                0.33921,
                0.348,
                0.35689,
                0.36588,
                0.37497,
                0.38416,
                0.39345,
                0.40286,
                0.41238,
                0.42205,
                0.43183,
                0.44173,
                0.45173,
                0.46184,
                0.47207,
                0.48242,
                0.49293,
                0.5036,
                0.51443,
                0.52541,
                0.53657,
                0.54791,
                0.55945,
                0.57118,
                0.58309,
                0.59521,
                0.60756,
                0.62015,
                0.63299,
                0.64615,
                0.65969,
                0.6737,
                0.68814,
                0.703,
                0.71837,
                0.73438,
                0.75116,
                0.7689,
                0.78786,
                0.80845,
                0.8314,
                0.85813,
                0.89255,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x37",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "8,700.5t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0029t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    },
    "CA": {
        "wealth": {
            "percentile": [
                0,
                -0.0056,
                -0.0081,
                -0.0099,
                -0.0113,
                -0.0124,
                -0.0133,
                -0.014,
                -0.0145,
                -0.0149,
                -0.0151,
                -0.0153,
                -0.0153,
                -0.0153,
                -0.0152,
                -0.015,
                -0.0148,
                -0.0146,
                -0.0143,
                -0.0139,
                -0.0135,
                -0.013,
                -0.0125,
                -0.0119,
                -0.0112,
                -0.0105,
                -0.0097,
                -0.0089,
                -0.0079,
                -0.0069,
                -0.0058,
                -0.0045,
                -0.0032,
                -0.0018,
                -0.0003,
                0.0014,
                0.0031,
                0.005,
                0.007,
                0.0091,
                0.0113,
                0.0136,
                0.016,
                0.0186,
                0.0213,
                0.0241,
                0.027,
                0.0301,
                0.0334,
                0.0367,
                0.0403,
                0.0439,
                0.0478,
                0.0518,
                0.056,
                0.0603,
                0.0648,
                0.0695,
                0.0744,
                0.0794,
                0.0847,
                0.0902,
                0.0959,
                0.1019,
                0.108,
                0.1145,
                0.1211,
                0.1281,
                0.1353,
                0.1428,
                0.1507,
                0.1588,
                0.1673,
                0.1761,
                0.1854,
                0.195,
                0.205,
                0.2155,
                0.2265,
                0.238,
                0.2501,
                0.2627,
                0.2759,
                0.2898,
                0.3044,
                0.3198,
                0.3362,
                0.3535,
                0.372,
                0.3918,
                0.4129,
                0.4355,
                0.4599,
                0.4864,
                0.5156,
                0.548,
                0.5849,
                0.628,
                0.6812,
                0.7551,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "13%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "$1,528,883,919.70",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.75",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.0032,
                0.0064,
                0.0096,
                0.0128,
                0.016,
                0.0192,
                0.0226,
                0.0261,
                0.0298,
                0.0335,
                0.0373,
                0.0412,
                0.0452,
                0.0495,
                0.0538,
                0.0584,
                0.063,
                0.0677,
                0.0725,
                0.0774,
                0.0824,
                0.0874,
                0.0926,
                0.0978,
                0.1031,
                0.1085,
                0.114,
                0.1197,
                0.1255,
                0.1315,
                0.1374,
                0.1436,
                0.1498,
                0.1562,
                0.1628,
                0.1694,
                0.1762,
                0.1831,
                0.1901,
                0.1971,
                0.2043,
                0.2115,
                0.2187,
                0.2261,
                0.2337,
                0.2414,
                0.2491,
                0.257,
                0.265,
                0.2731,
                0.2812,
                0.2894,
                0.2978,
                0.3062,
                0.3148,
                0.3235,
                0.3323,
                0.3413,
                0.3504,
                0.3596,
                0.3688,
                0.3783,
                0.3878,
                0.3975,
                0.4073,
                0.4173,
                0.4275,
                0.4378,
                0.4483,
                0.459,
                0.4698,
                0.4807,
                0.4919,
                0.5032,
                0.5147,
                0.5264,
                0.5383,
                0.5504,
                0.5628,
                0.5754,
                0.5883,
                0.6016,
                0.6151,
                0.6288,
                0.6428,
                0.6572,
                0.6718,
                0.6868,
                0.7023,
                0.7183,
                0.7348,
                0.7519,
                0.7697,
                0.7885,
                0.8084,
                0.8299,
                0.8538,
                0.8818,
                0.9171,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x26",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "$22,451,738.10",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.35",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00315,
                0.0063,
                0.00945,
                0.01261,
                0.01576,
                0.01892,
                0.0221,
                0.02531,
                0.02865,
                0.03219,
                0.03594,
                0.03989,
                0.04401,
                0.04832,
                0.0528,
                0.05746,
                0.06228,
                0.06726,
                0.07241,
                0.07772,
                0.08311,
                0.08852,
                0.09393,
                0.09938,
                0.10486,
                0.11039,
                0.11591,
                0.12149,
                0.12707,
                0.13269,
                0.13836,
                0.14408,
                0.14987,
                0.15572,
                0.16162,
                0.16759,
                0.17362,
                0.17972,
                0.18589,
                0.19213,
                0.19847,
                0.20488,
                0.21138,
                0.21797,
                0.22467,
                0.23146,
                0.23835,
                0.24535,
                0.25246,
                0.25967,
                0.26699,
                0.27443,
                0.28197,
                0.28963,
                0.29741,
                0.30532,
                0.31334,
                0.32148,
                0.32973,
                0.3381,
                0.34661,
                0.35524,
                0.364,
                0.37289,
                0.38191,
                0.39108,
                0.40038,
                0.40983,
                0.41943,
                0.42917,
                0.43907,
                0.44913,
                0.45934,
                0.46974,
                0.48032,
                0.49108,
                0.50207,
                0.51327,
                0.52472,
                0.53642,
                0.54838,
                0.56063,
                0.5732,
                0.58611,
                0.59937,
                0.61302,
                0.62711,
                0.6417,
                0.65681,
                0.67255,
                0.68908,
                0.70634,
                0.7244,
                0.74342,
                0.76351,
                0.78565,
                0.80963,
                0.83641,
                0.86874,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x42",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "8,578.2t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0032t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    },
    "FR": {
        "wealth": {
            "percentile": [
                0,
                0.0,
                0.0,
                0.0001,
                0.0001,
                0.0001,
                0.0002,
                0.0002,
                0.0003,
                0.0003,
                0.0004,
                0.0005,
                0.0006,
                0.0007,
                0.0008,
                0.0009,
                0.001,
                0.0012,
                0.0014,
                0.0016,
                0.0018,
                0.002,
                0.0023,
                0.0026,
                0.003,
                0.0034,
                0.0039,
                0.0044,
                0.005,
                0.0056,
                0.0063,
                0.0071,
                0.008,
                0.009,
                0.0101,
                0.0113,
                0.0127,
                0.0143,
                0.016,
                0.0178,
                0.0198,
                0.022,
                0.0243,
                0.0268,
                0.0294,
                0.0322,
                0.0352,
                0.0383,
                0.0417,
                0.0453,
                0.049,
                0.053,
                0.0571,
                0.0613,
                0.0656,
                0.0701,
                0.0748,
                0.0796,
                0.0847,
                0.0901,
                0.0957,
                0.1015,
                0.1074,
                0.1136,
                0.1198,
                0.1262,
                0.1328,
                0.1396,
                0.1468,
                0.1543,
                0.1621,
                0.1702,
                0.1786,
                0.1872,
                0.196,
                0.2051,
                0.2144,
                0.2241,
                0.2343,
                0.245,
                0.2564,
                0.2684,
                0.2809,
                0.2938,
                0.3072,
                0.321,
                0.3354,
                0.3507,
                0.367,
                0.3849,
                0.4043,
                0.4254,
                0.4478,
                0.4717,
                0.4982,
                0.5289,
                0.5651,
                0.6069,
                0.6568,
                0.7282,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "2%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "1,337,671,375.70 €",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.73",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.004,
                0.008,
                0.0121,
                0.0163,
                0.0205,
                0.0247,
                0.0291,
                0.0335,
                0.0381,
                0.0427,
                0.0474,
                0.0524,
                0.0574,
                0.0624,
                0.0676,
                0.0732,
                0.0789,
                0.0849,
                0.0911,
                0.0972,
                0.1034,
                0.1097,
                0.116,
                0.1224,
                0.1289,
                0.1355,
                0.1421,
                0.1488,
                0.1554,
                0.1622,
                0.1692,
                0.1763,
                0.1833,
                0.1905,
                0.1978,
                0.2053,
                0.2129,
                0.2205,
                0.2283,
                0.2361,
                0.244,
                0.252,
                0.26,
                0.2681,
                0.2763,
                0.2847,
                0.2931,
                0.3015,
                0.3101,
                0.3188,
                0.3279,
                0.3372,
                0.3465,
                0.3558,
                0.3654,
                0.375,
                0.3847,
                0.3945,
                0.4045,
                0.4146,
                0.4247,
                0.435,
                0.4452,
                0.4557,
                0.4662,
                0.4767,
                0.4874,
                0.4984,
                0.5095,
                0.5206,
                0.5319,
                0.5432,
                0.5547,
                0.5662,
                0.5778,
                0.5897,
                0.6016,
                0.6136,
                0.6256,
                0.6377,
                0.65,
                0.6624,
                0.6749,
                0.6875,
                0.7003,
                0.7136,
                0.7272,
                0.741,
                0.755,
                0.7691,
                0.7839,
                0.7988,
                0.8141,
                0.8296,
                0.8456,
                0.8636,
                0.8843,
                0.9064,
                0.9338,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x17",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "19,846,605.00 €",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.27",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00301,
                0.00602,
                0.00903,
                0.01204,
                0.01505,
                0.01807,
                0.02112,
                0.02421,
                0.02758,
                0.03122,
                0.03512,
                0.03925,
                0.04362,
                0.0482,
                0.05301,
                0.05803,
                0.06325,
                0.06869,
                0.07433,
                0.08017,
                0.0861,
                0.09216,
                0.09835,
                0.10465,
                0.11106,
                0.11759,
                0.12424,
                0.13099,
                0.13785,
                0.14482,
                0.15187,
                0.15902,
                0.16626,
                0.17359,
                0.18099,
                0.18849,
                0.19607,
                0.20373,
                0.21147,
                0.2193,
                0.2272,
                0.23519,
                0.24326,
                0.25141,
                0.25965,
                0.26797,
                0.27637,
                0.28485,
                0.29342,
                0.30207,
                0.31081,
                0.31962,
                0.32853,
                0.33752,
                0.3466,
                0.35577,
                0.36503,
                0.37439,
                0.38383,
                0.39337,
                0.40301,
                0.41275,
                0.4226,
                0.43255,
                0.4426,
                0.45276,
                0.46302,
                0.4734,
                0.48389,
                0.49449,
                0.50521,
                0.51604,
                0.52701,
                0.5381,
                0.54934,
                0.56071,
                0.57224,
                0.58392,
                0.59576,
                0.60778,
                0.61998,
                0.63237,
                0.64497,
                0.6578,
                0.67086,
                0.68417,
                0.69777,
                0.71169,
                0.72597,
                0.74069,
                0.75585,
                0.77152,
                0.78779,
                0.8048,
                0.82276,
                0.84201,
                0.86309,
                0.88711,
                0.91702,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x28",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "4,044.6t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0030t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    },
    "GB": {
        "wealth": {
            "percentile": [
                0,
                -0.0013,
                -0.0019,
                -0.0021,
                -0.0023,
                -0.0024,
                -0.0025,
                -0.0025,
                -0.0025,
                -0.0025,
                -0.0025,
                -0.0025,
                -0.0025,
                -0.0024,
                -0.0024,
                -0.0024,
                -0.0023,
                -0.0023,
                -0.0022,
                -0.0021,
                -0.0019,
                -0.0018,
                -0.0015,
                -0.0013,
                -0.0009,
                -0.0004,
                0.0001,
                0.0007,
                0.0014,
                0.0022,
                0.0032,
                0.0043,
                0.0055,
                0.0068,
                0.0081,
                0.0096,
                0.0112,
                0.0129,
                0.0148,
                0.0169,
                0.0189,
                0.021,
                0.0235,
                0.0259,
                0.0284,
                0.0311,
                0.0339,
                0.037,
                0.0402,
                0.0433,
                0.0465,
                0.0499,
                0.0536,
                0.0575,
                0.0616,
                0.0659,
                0.0703,
                0.075,
                0.0798,
                0.0848,
                0.09,
                0.0956,
                0.1012,
                0.1071,
                0.1131,
                0.1193,
                0.126,
                0.133,
                0.1402,
                0.1477,
                0.1558,
                0.1641,
                0.1729,
                0.1818,
                0.1911,
                0.2005,
                0.2108,
                0.2217,
                0.2331,
                0.2452,
                0.2575,
                0.2705,
                0.2845,
                0.2992,
                0.3153,
                0.332,
                0.3487,
                0.3663,
                0.3859,
                0.4062,
                0.4288,
                0.4523,
                0.4781,
                0.5063,
                0.5386,
                0.5719,
                0.6093,
                0.6523,
                0.7073,
                0.7875,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "12%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "£455,733,639.80",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.73",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.0049,
                0.0101,
                0.0154,
                0.0207,
                0.026,
                0.0314,
                0.0368,
                0.0422,
                0.0477,
                0.0532,
                0.0587,
                0.0642,
                0.0698,
                0.0756,
                0.0817,
                0.0879,
                0.0943,
                0.1008,
                0.1073,
                0.1139,
                0.1205,
                0.1271,
                0.1338,
                0.1405,
                0.1472,
                0.154,
                0.1608,
                0.1676,
                0.1744,
                0.1813,
                0.1881,
                0.195,
                0.2019,
                0.2088,
                0.2158,
                0.2228,
                0.2299,
                0.237,
                0.2441,
                0.2513,
                0.2586,
                0.2659,
                0.2734,
                0.2808,
                0.2883,
                0.2962,
                0.304,
                0.3119,
                0.3198,
                0.3278,
                0.3359,
                0.344,
                0.3523,
                0.3607,
                0.3692,
                0.3777,
                0.3863,
                0.3951,
                0.4039,
                0.4128,
                0.4218,
                0.4307,
                0.4398,
                0.449,
                0.4582,
                0.4676,
                0.4771,
                0.4868,
                0.4964,
                0.5061,
                0.5158,
                0.5257,
                0.5358,
                0.5459,
                0.5562,
                0.5667,
                0.5773,
                0.5883,
                0.5993,
                0.6105,
                0.6219,
                0.6336,
                0.6456,
                0.6581,
                0.6706,
                0.6834,
                0.6967,
                0.7102,
                0.7241,
                0.7385,
                0.7533,
                0.7688,
                0.7846,
                0.8014,
                0.8193,
                0.8384,
                0.86,
                0.885,
                0.9172,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x17",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "£23,511,109.70",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.27",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00306,
                0.00611,
                0.00917,
                0.01223,
                0.01528,
                0.01835,
                0.02144,
                0.02458,
                0.02803,
                0.03176,
                0.03577,
                0.04002,
                0.04452,
                0.04926,
                0.05422,
                0.0594,
                0.0648,
                0.07041,
                0.07623,
                0.08225,
                0.08838,
                0.09459,
                0.10085,
                0.10717,
                0.11357,
                0.12006,
                0.12664,
                0.13329,
                0.14002,
                0.14683,
                0.15371,
                0.16067,
                0.16768,
                0.17478,
                0.18195,
                0.18919,
                0.1965,
                0.20389,
                0.21137,
                0.21892,
                0.22656,
                0.23426,
                0.24202,
                0.24983,
                0.25771,
                0.26565,
                0.27367,
                0.28176,
                0.28993,
                0.29818,
                0.30653,
                0.31497,
                0.3235,
                0.3321,
                0.34075,
                0.34949,
                0.35832,
                0.36723,
                0.37623,
                0.38534,
                0.39453,
                0.40382,
                0.41323,
                0.42273,
                0.43233,
                0.44203,
                0.45184,
                0.46177,
                0.4718,
                0.48196,
                0.49226,
                0.50267,
                0.5132,
                0.52386,
                0.53467,
                0.54562,
                0.55673,
                0.56803,
                0.57953,
                0.59122,
                0.6031,
                0.61518,
                0.62749,
                0.64009,
                0.65297,
                0.66616,
                0.67968,
                0.69355,
                0.70772,
                0.72211,
                0.73698,
                0.75234,
                0.7683,
                0.785,
                0.80267,
                0.82162,
                0.84246,
                0.86635,
                0.89656,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x34",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "9,815.8t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0031t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    },
    "IT": {
        "wealth": {
            "percentile": [
                0,
                -0.021,
                -0.0237,
                -0.0255,
                -0.026,
                -0.0263,
                -0.0265,
                -0.0266,
                -0.0267,
                -0.0267,
                -0.0264,
                -0.026,
                -0.0257,
                -0.0253,
                -0.0249,
                -0.0245,
                -0.024,
                -0.0235,
                -0.023,
                -0.0224,
                -0.0218,
                -0.0211,
                -0.0204,
                -0.0198,
                -0.0191,
                -0.0183,
                -0.0176,
                -0.0168,
                -0.0161,
                -0.0153,
                -0.0144,
                -0.0132,
                -0.0118,
                -0.0103,
                -0.0088,
                -0.0071,
                -0.0055,
                -0.0038,
                -0.0021,
                -0.0004,
                0.0013,
                0.0031,
                0.005,
                0.007,
                0.009,
                0.0112,
                0.0136,
                0.0162,
                0.019,
                0.0221,
                0.0254,
                0.029,
                0.0328,
                0.0369,
                0.0413,
                0.0459,
                0.0507,
                0.0558,
                0.0611,
                0.0668,
                0.0728,
                0.0798,
                0.0875,
                0.0954,
                0.1032,
                0.1111,
                0.119,
                0.1269,
                0.1348,
                0.1428,
                0.1508,
                0.1589,
                0.1674,
                0.1766,
                0.1865,
                0.1972,
                0.2086,
                0.2207,
                0.2333,
                0.2466,
                0.2605,
                0.2751,
                0.2903,
                0.3063,
                0.3229,
                0.3403,
                0.3583,
                0.3771,
                0.3967,
                0.4172,
                0.4386,
                0.4611,
                0.4848,
                0.5104,
                0.5388,
                0.5711,
                0.6072,
                0.6504,
                0.7037,
                0.7794,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "9%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "738,703,754.40 €",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.75",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.0032,
                0.0066,
                0.0099,
                0.0134,
                0.017,
                0.0206,
                0.0242,
                0.0278,
                0.0315,
                0.0351,
                0.0389,
                0.0426,
                0.0464,
                0.0503,
                0.0541,
                0.058,
                0.0622,
                0.0664,
                0.0708,
                0.0754,
                0.0801,
                0.0848,
                0.0897,
                0.0948,
                0.0999,
                0.1052,
                0.1107,
                0.1162,
                0.1219,
                0.1276,
                0.1334,
                0.1393,
                0.1453,
                0.1513,
                0.1575,
                0.164,
                0.1704,
                0.1769,
                0.1838,
                0.1907,
                0.1976,
                0.2048,
                0.2121,
                0.2196,
                0.227,
                0.2346,
                0.2423,
                0.2501,
                0.258,
                0.2659,
                0.2739,
                0.2821,
                0.2904,
                0.2987,
                0.3074,
                0.3161,
                0.3248,
                0.3337,
                0.3427,
                0.3518,
                0.3609,
                0.37,
                0.3795,
                0.3891,
                0.3989,
                0.4087,
                0.4187,
                0.4289,
                0.4392,
                0.4497,
                0.4604,
                0.4713,
                0.4825,
                0.494,
                0.5056,
                0.5174,
                0.5294,
                0.5415,
                0.5539,
                0.5666,
                0.5796,
                0.5928,
                0.6063,
                0.62,
                0.634,
                0.6482,
                0.6629,
                0.6783,
                0.6942,
                0.7105,
                0.7272,
                0.7443,
                0.7626,
                0.7815,
                0.8018,
                0.8238,
                0.8481,
                0.8762,
                0.912,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x28",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "11,069,317.10 €",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.36",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00271,
                0.00542,
                0.00813,
                0.01084,
                0.01355,
                0.01627,
                0.01902,
                0.0218,
                0.02488,
                0.02823,
                0.03185,
                0.03573,
                0.03984,
                0.0442,
                0.04878,
                0.05358,
                0.0586,
                0.06384,
                0.06929,
                0.07495,
                0.08071,
                0.08658,
                0.09259,
                0.09871,
                0.10494,
                0.11126,
                0.11766,
                0.12418,
                0.13079,
                0.13747,
                0.14424,
                0.15111,
                0.15806,
                0.1651,
                0.17223,
                0.17944,
                0.18673,
                0.19412,
                0.20161,
                0.2092,
                0.21688,
                0.22467,
                0.23255,
                0.24053,
                0.24861,
                0.2568,
                0.26509,
                0.27347,
                0.28195,
                0.29053,
                0.2992,
                0.30798,
                0.31685,
                0.32581,
                0.33487,
                0.34405,
                0.35333,
                0.36272,
                0.37224,
                0.38187,
                0.3916,
                0.40145,
                0.41141,
                0.42149,
                0.43171,
                0.44205,
                0.45251,
                0.46311,
                0.47386,
                0.48473,
                0.49574,
                0.50689,
                0.51818,
                0.5296,
                0.54116,
                0.5529,
                0.56479,
                0.57686,
                0.58912,
                0.60157,
                0.61424,
                0.62712,
                0.64023,
                0.65358,
                0.66718,
                0.68102,
                0.69517,
                0.70969,
                0.72477,
                0.74049,
                0.75672,
                0.77355,
                0.79108,
                0.80947,
                0.82893,
                0.8498,
                0.87265,
                0.89857,
                0.93039,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x26",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "1,629.7t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0027t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    },
    "JP": {
        "wealth": {
            "percentile": [
                0,
                -0.0057,
                -0.0081,
                -0.0099,
                -0.0112,
                -0.0122,
                -0.013,
                -0.0136,
                -0.0141,
                -0.0144,
                -0.0147,
                -0.0148,
                -0.0148,
                -0.0147,
                -0.0146,
                -0.0145,
                -0.0142,
                -0.014,
                -0.0136,
                -0.0133,
                -0.0129,
                -0.0124,
                -0.0119,
                -0.0113,
                -0.0106,
                -0.0099,
                -0.0091,
                -0.0082,
                -0.0073,
                -0.0063,
                -0.0051,
                -0.0039,
                -0.0026,
                -0.0012,
                0.0003,
                0.0019,
                0.0036,
                0.0054,
                0.0074,
                0.0094,
                0.0116,
                0.0139,
                0.0163,
                0.0188,
                0.0214,
                0.0242,
                0.0271,
                0.0302,
                0.0333,
                0.0367,
                0.0401,
                0.0437,
                0.0475,
                0.0514,
                0.0555,
                0.0597,
                0.0642,
                0.0687,
                0.0735,
                0.0785,
                0.0836,
                0.089,
                0.0946,
                0.1004,
                0.1064,
                0.1127,
                0.1193,
                0.126,
                0.1331,
                0.1405,
                0.1482,
                0.1561,
                0.1644,
                0.1731,
                0.1821,
                0.1916,
                0.2014,
                0.2117,
                0.2225,
                0.2338,
                0.2457,
                0.2581,
                0.2711,
                0.2848,
                0.2992,
                0.3145,
                0.3306,
                0.3478,
                0.3661,
                0.3857,
                0.4066,
                0.4292,
                0.4535,
                0.48,
                0.5093,
                0.542,
                0.5792,
                0.6229,
                0.677,
                0.7525,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "12%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "¥64,659,561,734",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.75",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.0028,
                0.0056,
                0.0084,
                0.0111,
                0.0139,
                0.0168,
                0.0198,
                0.023,
                0.0263,
                0.0297,
                0.0331,
                0.0367,
                0.0404,
                0.0443,
                0.0484,
                0.0526,
                0.0569,
                0.0613,
                0.0659,
                0.0704,
                0.0751,
                0.0798,
                0.0846,
                0.0895,
                0.0944,
                0.0996,
                0.1048,
                0.1103,
                0.1158,
                0.1216,
                0.1274,
                0.1333,
                0.1395,
                0.1457,
                0.1522,
                0.1588,
                0.1655,
                0.1724,
                0.1795,
                0.1867,
                0.1939,
                0.2012,
                0.2086,
                0.2162,
                0.224,
                0.2319,
                0.2399,
                0.248,
                0.2563,
                0.2647,
                0.2731,
                0.2816,
                0.2902,
                0.2989,
                0.3077,
                0.3166,
                0.3256,
                0.3347,
                0.3439,
                0.3531,
                0.3623,
                0.3716,
                0.381,
                0.3904,
                0.3998,
                0.4093,
                0.4189,
                0.4284,
                0.438,
                0.4476,
                0.4571,
                0.4667,
                0.4763,
                0.4859,
                0.4954,
                0.505,
                0.5146,
                0.5242,
                0.5338,
                0.5434,
                0.5531,
                0.5629,
                0.5727,
                0.5827,
                0.5927,
                0.6031,
                0.6137,
                0.6248,
                0.6365,
                0.6491,
                0.6629,
                0.6782,
                0.6956,
                0.7158,
                0.7397,
                0.7685,
                0.8038,
                0.848,
                0.9059,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x34",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "¥86,673,640",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.38",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00291,
                0.00581,
                0.00872,
                0.01163,
                0.01453,
                0.01745,
                0.02038,
                0.02335,
                0.02655,
                0.03002,
                0.03374,
                0.03771,
                0.04191,
                0.04634,
                0.05098,
                0.05583,
                0.06089,
                0.06615,
                0.07161,
                0.07727,
                0.08302,
                0.08884,
                0.09474,
                0.10068,
                0.10668,
                0.11272,
                0.11882,
                0.12497,
                0.13118,
                0.13746,
                0.1438,
                0.1502,
                0.15668,
                0.16322,
                0.16983,
                0.1765,
                0.18323,
                0.19003,
                0.19689,
                0.20382,
                0.21081,
                0.21787,
                0.225,
                0.23219,
                0.23946,
                0.2468,
                0.25421,
                0.26171,
                0.26929,
                0.27694,
                0.28468,
                0.29249,
                0.30038,
                0.30834,
                0.31636,
                0.32447,
                0.33264,
                0.34091,
                0.34927,
                0.35771,
                0.36626,
                0.3749,
                0.38363,
                0.39245,
                0.40137,
                0.41037,
                0.41948,
                0.4287,
                0.43802,
                0.44747,
                0.45705,
                0.46675,
                0.4766,
                0.48658,
                0.49671,
                0.50698,
                0.51742,
                0.52802,
                0.53879,
                0.54974,
                0.56092,
                0.57233,
                0.584,
                0.59597,
                0.60825,
                0.62089,
                0.63393,
                0.64734,
                0.66136,
                0.67588,
                0.69651,
                0.71785,
                0.74,
                0.76315,
                0.78755,
                0.81358,
                0.84184,
                0.87346,
                0.91132,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x31",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "6,132.6t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0029t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    },
    "US": {
        "wealth": {
            "percentile": [
                0,
                -0.001,
                -0.0019,
                -0.0027,
                -0.0035,
                -0.0042,
                -0.0049,
                -0.0055,
                -0.006,
                -0.0064,
                -0.0068,
                -0.0071,
                -0.0074,
                -0.0075,
                -0.0077,
                -0.0078,
                -0.0078,
                -0.0078,
                -0.0078,
                -0.0078,
                -0.0078,
                -0.0077,
                -0.0077,
                -0.0076,
                -0.0076,
                -0.0075,
                -0.0074,
                -0.0073,
                -0.0072,
                -0.0071,
                -0.0069,
                -0.0067,
                -0.0064,
                -0.006,
                -0.0056,
                -0.0052,
                -0.0047,
                -0.0041,
                -0.0034,
                -0.0027,
                -0.0019,
                -0.0011,
                -0.0002,
                0.0007,
                0.0017,
                0.0028,
                0.004,
                0.0052,
                0.0065,
                0.0079,
                0.0095,
                0.0111,
                0.0129,
                0.0148,
                0.0168,
                0.019,
                0.0214,
                0.0239,
                0.0267,
                0.0296,
                0.0327,
                0.036,
                0.0395,
                0.0433,
                0.0473,
                0.0515,
                0.056,
                0.0608,
                0.0659,
                0.0714,
                0.0771,
                0.0832,
                0.0897,
                0.0966,
                0.1039,
                0.1117,
                0.1199,
                0.1286,
                0.1378,
                0.1476,
                0.1579,
                0.1688,
                0.1804,
                0.1927,
                0.2057,
                0.2195,
                0.2342,
                0.2499,
                0.2667,
                0.2847,
                0.3042,
                0.3253,
                0.3484,
                0.3738,
                0.4022,
                0.4344,
                0.4716,
                0.5161,
                0.5722,
                0.6517,
                1.0
            ],
            "statistics": [
                [
                    "Zero Assets",
                    "20%",
                    "This share of people has no assets or is in debt"
                ],
                [
                    "Top 0.001% Wealth",
                    "$2,498,602,950.60",
                    "A person in the top 0.001% has this much wealth"
                ],
                [
                    "Gini Coefficient",
                    "0.83",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "income": {
            "percentile": [
                0,
                0.0001,
                0.0003,
                0.0007,
                0.0013,
                0.0021,
                0.0031,
                0.0043,
                0.0057,
                0.0074,
                0.0093,
                0.0115,
                0.0139,
                0.0166,
                0.0196,
                0.0227,
                0.0261,
                0.0297,
                0.0334,
                0.0373,
                0.0413,
                0.0454,
                0.0496,
                0.0538,
                0.0582,
                0.0626,
                0.0671,
                0.0717,
                0.0763,
                0.0811,
                0.0859,
                0.0909,
                0.096,
                0.1012,
                0.1065,
                0.112,
                0.1175,
                0.1232,
                0.129,
                0.1349,
                0.1409,
                0.147,
                0.1532,
                0.1595,
                0.1659,
                0.1724,
                0.179,
                0.1857,
                0.1926,
                0.1995,
                0.2065,
                0.2137,
                0.221,
                0.2284,
                0.2359,
                0.2436,
                0.2514,
                0.2593,
                0.2674,
                0.2756,
                0.2839,
                0.2924,
                0.301,
                0.3097,
                0.3186,
                0.3276,
                0.3368,
                0.3461,
                0.3556,
                0.3652,
                0.375,
                0.385,
                0.3952,
                0.4056,
                0.4162,
                0.427,
                0.438,
                0.4493,
                0.4608,
                0.4726,
                0.4847,
                0.4971,
                0.5098,
                0.5228,
                0.5362,
                0.5499,
                0.5641,
                0.5788,
                0.5939,
                0.6097,
                0.6261,
                0.6432,
                0.6612,
                0.6803,
                0.7007,
                0.7227,
                0.747,
                0.7745,
                0.8073,
                0.851,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x1490",
                    "The top 1% makes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Income",
                    "$135,946,644.30",
                    "A person in the top 0.001% has this much income"
                ],
                [
                    "Gini Coefficient",
                    "0.47",
                    "Measure of inequality (0 = equal, 1 = maximum inequality)"
                ]
            ]
        },
        "emission": {
            "percentile": [
                0.0,
                0.00288,
                0.00575,
                0.00863,
                0.01151,
                0.01439,
                0.01727,
                0.02016,
                0.02306,
                0.02598,
                0.02892,
                0.03202,
                0.03529,
                0.03871,
                0.04229,
                0.04601,
                0.04987,
                0.05388,
                0.05802,
                0.06229,
                0.06669,
                0.07115,
                0.0757,
                0.08035,
                0.08508,
                0.0899,
                0.0948,
                0.0998,
                0.10487,
                0.11003,
                0.11527,
                0.12059,
                0.12598,
                0.13146,
                0.13702,
                0.14267,
                0.1484,
                0.15421,
                0.16012,
                0.16613,
                0.17223,
                0.17843,
                0.18472,
                0.19111,
                0.1976,
                0.20419,
                0.21088,
                0.21768,
                0.22458,
                0.23158,
                0.23868,
                0.24589,
                0.2532,
                0.26063,
                0.26817,
                0.27582,
                0.28359,
                0.29147,
                0.29947,
                0.30756,
                0.31577,
                0.32409,
                0.33252,
                0.34108,
                0.34978,
                0.3586,
                0.36755,
                0.37663,
                0.38586,
                0.39522,
                0.40473,
                0.41439,
                0.42421,
                0.43419,
                0.44434,
                0.45467,
                0.46521,
                0.47596,
                0.48694,
                0.49814,
                0.50958,
                0.52126,
                0.5332,
                0.54539,
                0.55788,
                0.57067,
                0.5838,
                0.5973,
                0.61123,
                0.62565,
                0.6406,
                0.65617,
                0.67248,
                0.68964,
                0.70785,
                0.72741,
                0.74873,
                0.77258,
                0.80073,
                0.83758,
                1.0
            ],
            "statistics": [
                [
                    "Top vs Bottom",
                    "x56",
                    "The top 1% pollutes this much more than the bottom 1%"
                ],
                [
                    "Top 0.001% Emissions",
                    "43,763.4t CO2",
                    "The top 0.001% emits this much CO2 per person"
                ],
                [
                    "Bottom 1% Emissions",
                    "0.0029t CO2",
                    "The bottom 1% emits this much CO2 per person"
                ]
            ]
        }
    }
}

// DOM elements
const rangeMin = document.getElementById('range-min');
const rangeMax = document.getElementById('range-max');
const rangeFill = document.getElementById('range-fill');
const rangeDisplay = document.getElementById('range-display');
const percentileDescription = document.getElementById('percentile-description');
const wealthPercentage = document.getElementById('wealth-percentage');
const wealthInterpretation = document.getElementById('wealth-interpretation');
const wealthLabel = document.getElementById('wealth-label');
var distributionType = document.getElementById('distribution-type').value;
var country = document.getElementById('countries').value;

// Initialize the dual-range slider
function initializeDualRange() {
    updateRangeDisplay();
    updateWealthDisplay();
    updateRangeFill();
    updateStatCards();
}

function updateStatCards() {
    statistics = data[country][distributionType]['statistics']
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach((card, index) => {
        const header = card.querySelector('h3');
        const value = card.querySelector('.stat-value');
        const description = card.querySelector('.stat-description');
        
        header.textContent = statistics[index][0]
        value.textContent = statistics[index][1]
        description.textContent = statistics[index][2]
    })
    
}

// Update range display
function updateRangeDisplay() {
    const min = parseInt(rangeMin.value);
    const max = parseInt(rangeMax.value);
    rangeDisplay.textContent = `${min}% to ${max}%`;
}

// Update range fill visualization
function updateRangeFill() {
    const min = parseInt(rangeMin.value);
    const max = parseInt(rangeMax.value);
    const left = (min / 100) * 100;
    const width = ((max - min) / 100) * 100;
    
    rangeFill.style.left = left + '%';
    rangeFill.style.width = width + '%';
}

// Get wealth share for a percentile range
function getWealthShare(startPercentile, endPercentile) {
    const startData = data[country][distributionType]['percentile'][startPercentile]
    const endData = data[country][distributionType]['percentile'][endPercentile]
    
    return 100 * (endData - startData);
}

// Generate description for percentile range
function getPercentileDescription(min, max) {
    const range = max - min;
    
    if (min === 0 && max === 100) {
        return "Entire Population (0% to 100%)";
    }
    
    if (min === 0) {
        return `Bottom ${range}% (${min}% to ${max}%)`;
    }
    
    if (max === 100) {
        return `Top ${range}% (${min}% to ${max}%)`;
    }
    
    // Middle ranges
    return `Middle ${range}% (${min}% to ${max}%)`;
}

// Generate interpretation text
function getInterpretation(min, max, wealthShare) {
    const range = max - min;
    
    if (min === 0 && max === 100) {
        switch(distributionType) {
            case 'wealth':
                return "The entire population owns 100% of all wealth";
            case 'income':
                return 'The entire population makes 100% of all income';
            case 'emission':
                return 'The entire population produces 100% of all CO2';
        }
    }
    
    if (min === 0) {
        switch(distributionType) {
            case 'wealth':
                return `The poorest ${range}% own ${wealthShare.toFixed(1)}% of all wealth`;
            case 'income':
                return `The poorest ${range}% make ${wealthShare.toFixed(1)}% of all income`;
            case 'emission':
                return `The bottom ${range}% produce ${wealthShare.toFixed(1)}% of all CO2`;
        }
    }
    
    if (max === 100) {
        switch(distributionType) {
            case 'wealth':
                return `The richest ${range}% own ${wealthShare.toFixed(1)}% of all wealth`;
            case 'income':
                return `The richest ${range}% make ${wealthShare.toFixed(1)}% of all income`;
            case 'emission':
                return `The top ${range}% produce ${wealthShare.toFixed(1)}% of all CO2`;
        }
    }
    
    switch(distributionType) {
            case 'wealth':
                return `People in the ${min}% to ${max}% range own ${wealthShare.toFixed(1)}% of all wealth`;
            case 'income':
                return `People in the ${min}% to ${max}% range make ${wealthShare.toFixed(1)}% of all income`;
            case 'emission':
                return `People in the ${min}% to ${max}% range produce ${wealthShare.toFixed(1)}% of all CO2`;
        }
    // Middle ranges
    return "";
}

function getWealthLabel() {
    switch(distributionType) {
        case "wealth":
            return "of total wealth";
        case "income":
            return "of total income";
        case "emission":
            return "of total emissions"
    }
}

// Update wealth display
function updateWealthDisplay() {
    const min = parseInt(rangeMin.value);
    const max = parseInt(rangeMax.value);
    
    // Ensure min <= max
    if (min > max) {
        if (document.activeElement === rangeMin) {
            rangeMax.value = min;
        } else {
            rangeMin.value = max;
        }
        return updateWealthDisplay();
    }
    
    const wealthShare = getWealthShare(min, max);
    const description = getPercentileDescription(min, max);
    const interpretation = getInterpretation(min, max, wealthShare);
    
    percentileDescription.textContent = description;
    wealthPercentage.textContent = `${wealthShare.toFixed(1)}%`;
    wealthInterpretation.textContent = interpretation;
    wealthLabel.textContent = getWealthLabel();
}

// Handle range input changes
function handleRangeChange() {
    updateRangeDisplay();
    updateWealthDisplay();
    updateRangeFill();
}

// Prevent range inputs from crossing over
rangeMin.addEventListener('input', function() {
    const min = parseInt(rangeMin.value);
    const max = parseInt(rangeMax.value);
    if (min > max) {
        rangeMax.value = min;
    }
    handleRangeChange();
});

rangeMax.addEventListener('input', function() {
    const min = parseInt(rangeMin.value);
    const max = parseInt(rangeMax.value);
    
    if (max < min) {
        rangeMin.value = max;
    }
    handleRangeChange();
});

document.getElementById('countries').addEventListener('change', (event) => {
    country = document.getElementById('countries').value;
    handleRangeChange();
    updateStatCards();
});

document.getElementById('distribution-type').addEventListener('change', (event) => {
    distributionType = document.getElementById('distribution-type').value;
    handleRangeChange();
    updateStatCards();
});


// Initialize on page load
document.addEventListener('DOMContentLoaded', initializeDualRange);

// Handle window resize for responsiveness
window.addEventListener('resize', updateRangeFill);
